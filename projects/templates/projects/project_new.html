{% extends "layout.html" %}
{% load widget_tweaks %}

{% block body %}
  <div class="bounds circle--page circle--article">
    <form id="form", method="POST">
      {% csrf_token %}
      {{ form.non_field_errors }}

      {% for hidden_field in form.hidden_fields %}
      {{ hidden_field.errors }}
      {{ hidden_field }}
      {% endfor %}  
        <div class="grid-70">
            <div class="circle--article--body">
              {% render_field form.title class+="circle--input--h1" placeholder="Project title" %}
              {% render_field form.description placeholder="Project description" %}
            </div>
      
            <div class="circle--project--positions">
              <h2>Positions</h2>
      
              <ul class="circle--group--list circle--clone--list">
                <li>
                  <input type="text" class="circle--input--h3 position-title" placeholder="Position Title" />
                  <textarea placeholder="Position description..."></textarea>
                  <a class="circle--clone--add">Add Position</a>
                  <a class="circle--clone--remove">Remove</a>
                </li>
              </ul>
              <a class="button button-primary" href="project.html">Save Project</a>
      
            </div>
          </div>
      
          <div class="grid-25 grid-push-5">
      
            <div class="circle--secondary--module">
              <h3>Project Timeline</h3>
              <textarea placeholder="Time estimate" class="circle--textarea--input"></textarea>
            </div>
      
            <div class="circle--secondary--module">
              <h3>Applicant Requirements</h3>
              <textarea></textarea>
            </div>
          </div>      
    </form>
  </div>

  <script>
    $("#form").submit(function() {
      $("id_needs_internal").val(Array.prototype.map.call(document.getElementsByClassName("position-title"), function (val) {
        return val.value;
      }).join(',') || '')
    })
  </script>
  {% endblock body %}